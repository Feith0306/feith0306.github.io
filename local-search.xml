<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>SOS Programming 系列 - 0 预备知识和底层逻辑</title>
    <link href="/2025/12/12/02=SOS_Programming/SOS_0/"/>
    <url>/2025/12/12/02=SOS_Programming/SOS_0/</url>
    
    <content type="html"><![CDATA[<h1 id="sos-programming">SOS Programming</h1><hr><h2 id="what什么是-sossum-of-squares">1. What：什么是 SOS（Sum-of-Squares）</h2><h3 id="多项式非负性的一个可计算的充分条件">1.1 多项式非负性的一个“可计算的充分条件”</h3><p>在连续系统分析、鲁棒控制、非线性稳定性、优化中，经常需要证明一个多项式在某个集合上<strong>非负</strong>，例如 - Lyapunov 函数条件：<span class="math inline">\(V(x)\ge 0\)</span>、<span class="math inline">\(\dot V(x)\le 0\)</span> - 障碍函数（CBF）条件：<span class="math inline">\(h(x)\ge 0\)</span> 集合不变 - 多项式不等式约束：<span class="math inline">\(p(x)\ge 0\)</span></p><p>难点是：<strong>判定一个一般多项式在全空间（或半代数集合）非负，是很难的（一般是 NP-hard 级别）</strong>。SOS 的思想是：把“非负”替换成一个<strong>更强但可求解</strong>的条件。</p><hr><h3 id="sos-的定义">1.2 SOS 的定义</h3><p>给定一个实系数多项式 <span class="math inline">\(p(x)\)</span>（<span class="math inline">\(x\in\mathbb{R}^n\)</span>），如果存在一些多项式 <span class="math inline">\(f_i(x)\)</span> 使得</p><p><span class="math display">\[p(x)=\sum_{i=1}^m f_i(x)^2,\]</span></p><p>则称 <span class="math inline">\(p(x)\)</span> 是 <strong>Sum-of-Squares（SOS）多项式</strong>，记作 <span class="math inline">\(p(x)\in \Sigma[x]\)</span>。</p><p>显然： - 若 <span class="math inline">\(p(x)\)</span> 是 SOS，则 <span class="math inline">\(p(x)\ge 0\)</span> 对所有 <span class="math inline">\(x\)</span> 成立； - 反过来不一定（存在非负但不是 SOS 的多项式，维度/次数上去后会出现）。</p><p>因此 SOS 是“非负”的一个<strong>可计算的充分条件</strong>。</p><hr><h3 id="sos-与-gram-矩阵关键桥梁把多项式问题变成-psd-矩阵问题">1.3 SOS 与 Gram 矩阵（关键桥梁：把多项式问题变成 PSD 矩阵问题）</h3><p>设 <span class="math inline">\(p(x)\)</span> 的次数为 <span class="math inline">\(2d\)</span>（偶数，若是奇数也可通过引入松弛处理），取单项式向量 <span class="math inline">\(z(x)\)</span> 为所有次数 <span class="math inline">\(\le d\)</span> 的单项式（按某种顺序排列）：</p><p><span class="math display">\[z(x)=\big[1,\ x_1,\dots,\ x_n,\ x_1^2,\ x_1x_2,\dots,\ x_n^d\big]^\top.\]</span></p><p>核心定理（Gram 表示）： <span class="math display">\[p(x)\ \text{是 SOS} \quad \Longleftrightarrow \quad \exists\, Q\succeq 0\ \text{使得}\ p(x)=z(x)^\top Q z(x).\]</span></p><p>这里 <span class="math inline">\(Q\succeq 0\)</span> 表示 <span class="math inline">\(Q\)</span> 是<strong>半正定矩阵</strong>。</p><p>直观理解： - <span class="math inline">\(z^\top Q z\)</span> 展开后是一个多项式； - 约束 <span class="math inline">\(Q\succeq 0\)</span> 保证它可以写成若干平方和（因为 <span class="math inline">\(Q=R^\top R\)</span> 时 <span class="math inline">\(z^\top Q z=\|Rz\|^2\)</span>）。</p><p>这一步是 SOS programming 的“发动机”： - 多项式非负性（难） - 变成 PSD 矩阵可行性（SDP，可数值求解）</p><hr><h2 id="why为什么要用-sos">2. Why：为什么要用 SOS</h2><h3 id="真正想做的是验证合成sos-把它变成可求解的凸优化很多时候">2.1 真正想做的是“验证/合成”，SOS 把它变成可求解的凸优化（很多时候）</h3><p>控制里常见两类任务：</p><p><strong>(A) 验证（analysis）</strong><br>给定候选 <span class="math inline">\(V(x)\)</span>，验证： <span class="math display">\[V(x)-\epsilon\|x\|^{2d}\in \Sigma[x],\qquad -\dot V(x)\in \Sigma[x]\]</span> 用来证明稳定性、吸引域等。</p><p><strong>(B) 合成（synthesis）</strong><br>同时“找”一个多项式 <span class="math inline">\(V(x)\)</span>（甚至还要找控制律 <span class="math inline">\(u(x)\)</span>），使得上述条件成立。此时变量是 <span class="math inline">\(V\)</span> 的系数、控制律系数、以及 Gram 矩阵 <span class="math inline">\(Q\)</span> 等。</p><p>为什么 SOS 特别有价值： - 它把“解析证明”变成“可计算证明”； - 把很多原本非凸/不可判定的问题，替换为 SDP（或分层的 SDP 序列）。</p><hr><h3 id="sos-与半代数集合上的非负性putinar-证书在实际约束里会碰到">2.2 SOS 与半代数集合上的非负性：Putinar 证书（在实际约束里会碰到）</h3><p>很多时候不需要在全空间非负，而是在集合</p><p><span class="math display">\[\mathcal{K}=\{x:\ g_1(x)\ge 0,\dots,g_r(x)\ge 0\}\]</span></p><p>上非负（例如状态约束、吸引域估计的子水平集、CBF 安全集）。</p><p>常用的 SOS 证书形式（典型为 Putinar 型）是：</p><p><span class="math display">\[p(x)\ge 0\ \text{on}\ \mathcal{K}\ \Leftarrow\ p(x)=\sigma_0(x)+\sum_{i=1}^r \sigma_i(x)\,g_i(x),\quad \sigma_i(x)\in \Sigma[x].\]</span></p><p>解释： - <span class="math inline">\(\sigma_i(x)\ge 0\)</span>，<span class="math inline">\(g_i(x)\ge 0\)</span> 在集合内成立； - 因而右侧在集合内必然非负； - 通过“找 <span class="math inline">\(\sigma_i\)</span>”来构造一个<strong>可验证的非负证书</strong>。</p><p>这就是在 SOS Lyapunov、ROA、CBF、鲁棒性里反复看到的乘子（multiplier）逻辑。</p><hr><h3 id="现实代价sos-不是免费午餐">2.3 现实代价：SOS 不是“免费午餐”</h3><p>要清楚 SOS 的边界，否则很容易“跑通例子但不理解本质”：</p><ol type="1"><li><strong>保守性</strong>：非负不一定是 SOS；集合约束证书也需要一定条件（如 archimedean 条件）才有收敛保证。<br></li><li><strong>规模爆炸</strong>：<span class="math inline">\(z(x)\)</span> 的维度是组合数级别，SDP 变量 <span class="math inline">\(Q\)</span> 尺寸随 <span class="math inline">\(n,d\)</span> 急速增长。<br></li><li><strong>数值问题</strong>：SDP 的条件数、松弛项 <span class="math inline">\(\epsilon\)</span>、尺度缩放都会影响可解性与可信度。</li></ol><p>SOS programming，不是为了“把一切都扔进工具箱”，而是为了理解：<strong>它在什么结构下能高效地产生可信证书</strong>。</p><hr><h2 id="how怎么用-sos">3. How：怎么用 SOS</h2><h3 id="标准工作流">3.1 标准工作流</h3><ol type="1"><li><strong>把问题写成多项式不等式</strong>：稳定性、约束不变性、性能界等。<br></li><li><strong>选定证书结构</strong>：全局 SOS 或 半代数集合上的 SOS 乘子证书。<br></li><li><strong>选择次数（degree）</strong>：决定 <span class="math inline">\(V\)</span>、乘子 <span class="math inline">\(\sigma_i\)</span>、以及 <span class="math inline">\(z(x)\)</span> 的单项式上界。<br></li><li><strong>把“多项式等式”转为“系数匹配线性约束”</strong>：这是从符号到数值的关键一步。<br></li><li><strong>得到 SDP</strong>：变量是 Gram 矩阵（PSD）+ 多项式系数（线性）。<br></li><li><strong>调用 SDP 求解器</strong>：SeDuMi / SDPT3 / MOSEK 等。<br></li><li><strong>读回证书</strong>：得到 <span class="math inline">\(V(x)\)</span>、<span class="math inline">\(\sigma_i(x)\)</span> 或控制律系数，并做数值验证（采样检验、残差检验、尺度敏感性检验）。</li></ol><hr><h3 id="例-1lyapunov-稳定性验证最基础的-sos-用法">3.2 例 1：Lyapunov 稳定性验证（最基础的 SOS 用法）</h3><p>考虑多项式系统 <span class="math display">\[\dot x=f(x)\]</span> 给一个候选 <span class="math inline">\(V(x)\)</span>（多项式），希望证明原点渐近稳定。</p><p>常见 SOS 条件（加一个小的正定松弛）： <span class="math display">\[V(x)-\epsilon \|x\|^{2d} \in \Sigma[x],\qquad-\nabla V(x)^\top f(x) - \epsilon \|x\|^{2d} \in \Sigma[x].\]</span></p><p>含义： - 第一条：<span class="math inline">\(V\)</span> 正定（至少强制为 SOS 正定）； - 第二条：<span class="math inline">\(\dot V\le -\epsilon\|x\|^{2d}\)</span>，保证严格下降。</p><p>工具层面做的事情是：选择 <span class="math inline">\(V\)</span> 的形式/次数，然后把两个“属于 <span class="math inline">\(\Sigma[x]\)</span>”转成两个 PSD 约束。</p><hr><h3 id="例-2吸引域roa估计子水平集不变性">3.3 例 2：吸引域（ROA）估计：子水平集不变性</h3><p>想找到一个最大的 <span class="math inline">\(\rho\)</span>，使得集合 <span class="math display">\[\Omega_\rho=\{x:\ V(x)\le \rho\}\]</span> 在动力学下正不变，并且在集合内 <span class="math inline">\(\dot V&lt;0\)</span>。</p><p>经典 SOS 形式（S-procedure / 乘子）： <span class="math display">\[-(\nabla V^\top f)(x) - \sigma(x)\,(\rho - V(x)) \in \Sigma[x],\qquad \sigma(x)\in \Sigma[x].\]</span></p><p>解释： - 当 <span class="math inline">\(V(x)\le \rho\)</span> 时，<span class="math inline">\(\rho - V(x)\ge 0\)</span>； - 若 <span class="math inline">\(\sigma\ge 0\)</span>，则 <span class="math inline">\(\sigma(\rho-V)\)</span> 是非负项； - 上式保证在 <span class="math inline">\(V\le \rho\)</span> 内，<span class="math inline">\(-\dot V\)</span> 仍然非负，从而 <span class="math inline">\(\dot V\le 0\)</span>。</p><p>合成任务通常是最大化 <span class="math inline">\(\rho\)</span>（或相关体积近似指标），这会引入非凸性；实际常用交替迭代（fix <span class="math inline">\(V\)</span> solve <span class="math inline">\(\sigma,\rho\)</span>，再 fix <span class="math inline">\(\sigma\)</span> solve <span class="math inline">\(V\)</span> 等）。</p><hr><h3 id="例-3带约束的非负性把只在集合内成立转为-sos-证书">3.4 例 3：带约束的非负性：把“只在集合内成立”转为 SOS 证书</h3><p>若要保证 <span class="math display">\[p(x)\ge 0\quad \text{for all } x\in\mathcal{K}=\{x:g_i(x)\ge 0\},\]</span> 用乘子证书： <span class="math display">\[p(x)=\sigma_0(x)+\sum_i \sigma_i(x)g_i(x),\quad \sigma_i\in\Sigma[x].\]</span></p><p>应该把它理解为：<strong>在 <span class="math inline">\(\mathcal{K}\)</span> 上的非负性，被“解释”为全空间上的一个结构化分解。</strong> 工具不理解“集合上的逻辑”，它只理解“全空间的等式 + SOS/PSD 约束”。集合语义由通过乘子结构编码进去。</p><hr><h2 id="sos-tools-的底层求解逻辑与细节重点">4. SOS Tools 的“底层求解逻辑与细节”（重点）</h2><p>用 SOSTOOLS / YALMIP / Spotless / SumOfSquares.jl 时，看起来像“写几行就出结果”。但底层发生的事情基本都可以归结为下面这套机制。</p><hr><h3 id="关键抽象sos-约束-存在-psd-gram-矩阵-系数匹配">4.1 关键抽象：SOS 约束 = “存在 PSD Gram 矩阵 + 系数匹配”</h3><p>假设写了一个约束 <span class="math display">\[p(x)\in \Sigma[x].\]</span> 工具会做：</p><ol type="1"><li>选定 <span class="math inline">\(z(x)\)</span>（由指定次数上界决定）。<br></li><li>引入对称矩阵变量 <span class="math inline">\(Q\)</span>。<br></li><li>强制 <span class="math display">\[p(x)=z(x)^\top Q z(x)\]</span> 这不是数值点的等式，而是<strong>多项式恒等式</strong>。<br></li><li>把恒等式变成“系数匹配”：</li></ol><ul><li>将两边展开为单项式线性组合；</li><li>对每个单项式 <span class="math inline">\(x^\alpha\)</span>，匹配系数： <span class="math display">\[\text{coeff}_{x^\alpha}(p) = \text{coeff}_{x^\alpha}(z^\top Q z),\]</span> 得到一堆对 <span class="math inline">\(Q\)</span> 元素的<strong>线性等式约束</strong>。<br></li></ul><ol start="5" type="1"><li>再加上 PSD 约束： <span class="math display">\[Q\succeq 0.\]</span></li></ol><p>最终：SOS 约束变成了 SDP 约束。</p><hr><h3 id="为什么系数匹配是线性的">4.2 为什么“系数匹配”是线性的</h3><p><span class="math inline">\(z^\top Q z\)</span> 对 <span class="math inline">\(Q\)</span> 是线性的，因为 <span class="math display">\[z^\top Q z = \sum_{i,j} Q_{ij}\,z_i(x)\,z_j(x),\]</span> 其中 <span class="math inline">\(z_i z_j\)</span> 是已知的单项式（或多项式），未知量只有 <span class="math inline">\(Q_{ij}\)</span>，且是一阶出现，所以系数匹配给出线性方程组。</p><p>这也是为什么 SOS programming 大多落在 <strong>凸优化（SDP）</strong> 的范畴内：未知量只以线性方式进入，外加一个凸锥约束（PSD 锥）。</p><hr><h3 id="乘子multipliersos-的底层更多-gram-矩阵-更多线性约束">4.3 乘子（multiplier）SOS 的底层：更多 Gram 矩阵 + 更多线性约束</h3><p>当写 <span class="math display">\[p=\sigma_0+\sum_i \sigma_i g_i,\quad \sigma_i\in\Sigma[x],\]</span> 工具会： - 为每个 <span class="math inline">\(\sigma_i\)</span> 建一个 Gram 矩阵 <span class="math inline">\(Q_i\succeq 0\)</span>； - 将 <span class="math inline">\(\sigma_i(x)=z_i(x)^\top Q_i z_i(x)\)</span>； - 把 <span class="math inline">\(p - \sum_i \sigma_i g_i\)</span> 展开； - 对每个单项式做系数匹配，得到线性等式； - 合起来依然是 SDP。</p><p>因此应当把“复杂 SOS 证书”理解为： - PSD 变量（可能很多块） - 线性耦合约束（系数匹配把块耦合起来）</p><hr><h3 id="工具如何选择单项式基细节决定规模">4.4 工具如何“选择单项式基”——细节决定规模</h3><p>单项式向量 <span class="math inline">\(z(x)\)</span> 的长度决定 Gram 矩阵大小。</p><p>若 <span class="math inline">\(n\)</span> 变量、最高次数 <span class="math inline">\(d\)</span>，<span class="math inline">\(z\)</span> 的长度是组合数： <span class="math display">\[|z| = \binom{n+d}{d}.\]</span></p><p>Gram 矩阵 <span class="math inline">\(Q\)</span> 维度是 <span class="math inline">\(|z|\times |z|\)</span>，独立变量数量约为 <span class="math inline">\(|z|(|z|+1)/2\)</span>（对称）。</p><p>必须具备这种数量级直觉，否则会在“n=6, d=6”这类设置上直接爆炸。</p><hr><h3 id="sdp-求解器实际在做什么">4.5 SDP 求解器实际在做什么</h3><p>SOS 工具本身通常不“求解”，它只是把模型<strong>编译</strong>成标准 SDP 形式，然后交给 SDP 求解器。</p><p>标准 SDP（原始-对偶）形式可写成： <span class="math display">\[\begin{align}\min_x\ &amp; c^\top x\\\text{s.t. }&amp; F(x)=F_0+\sum_k x_k F_k \succeq 0,\\&amp; Ax=b.\end{align}\]</span></p><p>对应到 SOS： - <span class="math inline">\(x\)</span> 包括：Lyapunov/控制律/乘子多项式系数、以及 Gram 矩阵自由元素； - <span class="math inline">\(F(x)\succeq 0\)</span> 包括所有 Gram PSD 约束（可能是块对角）； - <span class="math inline">\(Ax=b\)</span> 就是系数匹配产生的线性等式。</p><p>大多数 SDP 求解器用<strong>内点法（primal-dual interior-point）</strong>，本质是不断求解一系列线性化的 KKT 系统，直到残差足够小。</p><p>需要知道的现实影响： 1) 规模越大，KKT 系统越大，时间/内存迅速上升；<br>2) 病态（尺度差、次数高、系数跨度大）会导致数值不稳定；<br>3) 很多“不可行”其实是数值不可行（tolerance 问题），不是数学上不可行。</p><hr><h3 id="求出来的-sos如何读回到平方和分解">4.6 “求出来的 SOS”如何读回到“平方和分解”</h3><p>如果得到 <span class="math inline">\(Q\succeq 0\)</span>，理论上可分解 <span class="math inline">\(Q=R^\top R\)</span>，于是 <span class="math display">\[p(x)=z^\top Q z = \|R z(x)\|^2 = \sum_i f_i(x)^2,\]</span> 其中 <span class="math inline">\(f_i\)</span> 是 <span class="math inline">\(Rz\)</span> 的各分量。</p><p>但实际工具常不显式给 <span class="math inline">\(f_i\)</span>，而只给 <span class="math inline">\(Q\)</span> 或多项式系数。 如果要“证书可展示”，可以： - 数值上做 Cholesky/特征分解拿到一个近似的平方和； - 或者只展示 SOS 约束满足与残差（更常见、更稳健）。</p><hr><h3 id="次数选择与双线性bilinearity">4.7 次数选择与双线性（Bilinearity）</h3><p>很多“合成”问题一旦同时优化多个多项式，会出现双线性项，典型如： - 同时求 <span class="math inline">\(V\)</span> 和 乘子 <span class="math inline">\(\sigma\)</span>：<span class="math inline">\(\sigma(\rho-V)\)</span> 中 <span class="math inline">\(\sigma\)</span> 与 <span class="math inline">\(V\)</span> 相乘； - 同时求 <span class="math inline">\(V\)</span> 和 控制律 <span class="math inline">\(u(x)\)</span>：<span class="math inline">\(\nabla V^\top g(x)u(x)\)</span> 中 <span class="math inline">\(V\)</span> 与 <span class="math inline">\(u\)</span> 相乘。</p><p>这会把 SDP 变成非凸问题（BMI 或 polynomial bilinear constraints）。 工具可能还能“跑”，但若不理解这一点，就会误以为“SOS 一定是凸的”。</p><p>工程上常见处理： - 固定一部分变量，解另一个 SDP； - 交替迭代（coordinate descent 风格）； - 或引入结构化参数化降低耦合。</p><hr><h2 id="如何让-sos-结果更可信更可扩展">5. 如何让 SOS 结果更可信、更可扩展</h2><ol type="1"><li><strong>先做验证再做合成</strong>：先给一个结构合理的 <span class="math inline">\(V\)</span> 验证稳定性，确认系统与尺度没问题，再谈合成。<br></li><li><strong>控制尺度</strong>：变量归一化，避免系数跨越过大；必要时加入 <span class="math inline">\(\epsilon\)</span> 松弛。<br></li><li><strong>从低次数开始</strong>：<span class="math inline">\(d=2\)</span>、<span class="math inline">\(d=3\)</span> 起步，逐步加；不要一开始就追求“更强证书”。<br></li><li><strong>残差检查</strong>：将求解后的 <span class="math inline">\(p(x)-z^\top Q z\)</span> 展开检查最大系数残差；对关键不等式做采样验证。<br></li><li><strong>明确保守性来源</strong>：是 SOS 放松导致，还是次数限制导致，还是集合证书结构限制导致。<br></li><li><strong>识别是否非凸</strong>：一旦同时优化多个多项式并出现乘积，别再把它当 SDP；要用迭代/固定策略。</li></ol><hr><h2 id="总结">6. 总结</h2><p>SOS programming 的核心不是“平方和”本身，而是这条链：</p><p><span class="math display">\[\begin{align*}\text{多项式非负性（难）} &amp;\Rightarrow \text{SOS 证书（充分条件）} \Rightarrow \\\text{Gram 矩阵 PSD + 系数匹配（SDP）}  &amp;\Rightarrow \text{数值求解 + 证书回读/验证}.\end{align*}\]</span></p>]]></content>
    
    
    <categories>
      
      <category>SOS Programming</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SOS Tools</tag>
      
      <tag>optimization</tag>
      
      <tag>matlab</tag>
      
      <tag>SDP</tag>
      
      <tag>cvx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>L2 概念整理</title>
    <link href="/2025/04/29/00=Daily/4-L_2/"/>
    <url>/2025/04/29/00=Daily/4-L_2/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="一输入输出稳定性与增益约束-robot">一、输入输出稳定性与增益约束 <span class="github-emoji"><span>🤖</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f916.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h2><p>输入输出系统被建模为一个算子 $ G $，将输入信号 <span class="math inline">\(u : {\mathbb R} \mapsto {\mathbb R}^m\)</span> 映射为输出信号 $ y : {R} ^p $，即 $ y = G(u)$。</p><p>输入输出信号被认为属于 $ {L}_q[0, ) $ 空间，该空间由满足：</p><p><span class="math display">\[\|f\|_q := \left( \int_0^{\infty} \|f(t)\|^q {\mathrm {d}}t \right)^{1/q} &lt; \infty\]</span></p><p>的测度函数构成。这一约束使我们关注信号整体能量而非瞬时行为。</p><p>输入输出映射的最基本要求是<strong>因果性</strong>（causality）：系统在时间 $ t $ 时刻的输出 $y(t) $ 不能依赖于未来的输入 $ u(s) &nbsp;(s &gt; t) $。数学上，映射 <span class="math inline">\(G : L_q \to L_p\)</span> 是因果的，当且仅当对任意 $ u,v _q $ 和任意 $ T &gt; 0 $，若</p><p><span class="math display">\[u(t) = v(t) \quad \forall t \in [0, T] ,\]</span></p><p>则有</p><p><span class="math display">\[(G(u))(t) = (G(v))(t), \quad \forall t \in [0, T].\]</span></p><p>这保证了系统对未来信息的不可预测性，是物理实现的基本要求。</p><p>在此基础上，若存在常数 $ &gt; 0 $，使得：</p><p><span class="math display">\[\|G(u)\|_q \leq \gamma \|u\|_q,\]</span></p><p>则系统被称为具有有限 $ {L}_q $-增益，该增益 $ $ 被称为系统的 ${L}_q $-增益。更进一步，若系统对任意有界输入 $ u _q $ 输出 $ y _q $，则称为 $ {L}_q $-stable。</p><hr><h2 id="二小增益定理与闭环稳定性-boom">二、小增益定理与闭环稳定性 <span class="github-emoji"><span>💥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a5.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h2><p>当两个系统 $ G_1, G_2 $ 以负反馈互联构成闭环系统时，其输入输出关系将变得复杂。系统互联后，扰动信号可能在环路中反复传播、放大或衰减，因此需要严密的准则判断系统整体的稳定性。若我们将系统互联结构建模为：</p><p><span class="math display">\[\begin{cases}y_1 = G_1(u_1), \quad u_1 = e_1 - y_2, \\y_2 = G_2(u_2), \quad u_2 = e_2 + y_1,\end{cases}\]</span></p><p>则可以通过替换得到：</p><p><span class="math display">\[u = e - FG(u), \quad y = G(u), \quad F = \begin{bmatrix}0 &amp; I \\-I &amp; 0\end{bmatrix}.\]</span></p><p>此时系统整体的闭环行为由非线性代数方程 $ u = (I + FG)^{-1} e $ 决定。映射 $ (e_1, e_2) (y_1, y_2) $ 是否定义良好（即闭环是否存在且唯一），并具有 $ {L}_q $-稳定性，成为关键问题。</p><p><strong>小增益定理</strong> 给出了这个问题的充分条件之一：</p><p>若两个因果系统 $ G_1, G_2 $ 分别具有有限 $ {L}_q $-增益 $ _1, _2 $，且满足：</p><p><span class="math display">\[\gamma_1 \cdot \gamma_2 &lt; 1,\]</span></p><p>则闭环系统整体是 $ {}_q $-稳定的，且映射 $ e y $ 是连续、唯一的。</p><p>这一定理以代数乘积揭示了稳定性的本质：在能量意义下，只要反馈回路的总“放大能力”小于1，就能保证系统“收敛”而不是发散。对于线性系统，这一结果直接对应于频域的 <span class="math inline">\(H_{\infty}\)</span> 范数约束；而对于非线性系统，小增益定理提供了从局部 Lipschitz 性或数值界估计出发的通用判据。</p><hr><h2 id="三无源性系统与能量守恒结构-mechanical_arm">三、无源性系统与能量守恒结构 <span class="github-emoji"><span>🦾</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f9be.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h2><p>相较于小增益定理的代数判据，无源性理论（passivity）从物理角度出发，刻画系统在能量传递上的性质。</p><p>一个系统是<strong>无源的</strong>，意味着它无法生成能量：系统输出给环境的能量不超过它从环境获取的能量。</p><p>形式上，若对系统 $ G $ 存在常数 $  $，对任意 $ u _2 $ 和任意时间 $ T &gt; 0 $，有：</p><p><span class="math display">\[\int_0^T \langle (G(u))(t), u(t) \rangle {\mathrm {d}}t \geq \beta,\]</span></p><p>则称 $G $ 为<strong>无源系统</strong>。进一步地，若存在 $ &gt; 0 $ 使得：</p><p><span class="math display">\[\int_0^T \langle (G(u))(t), u(t) \rangle {\mathrm{d}}t \geq \varepsilon \|G(u)\|_{\mathcal{L}_2[0,T]}^2 + \beta,\]</span></p><p>则称 $ G $ 为<strong>严格输出无源系统</strong>。</p><p>无源系统的结构性质具有深远影响。首先，它天然满足因果性；其次，两个无源系统的互联系统仍然无源，从而自动继承稳定性和有限增益性质。</p><p>更重要的是，严格输出无源系统必定具有有限 $ {L}_2 $-gain，其增益满足：</p><p><span class="math display">\[\|G(u)\|_{\mathcal{L}_2} \leq \frac{1}{\sqrt\varepsilon} \|u\|_{\mathcal{L}_2} ,\]</span></p><p>因此，无源性不仅是系统的物理属性，也是一种增益约束条件，为稳定性与性能分析提供了结构化的数学工具。</p><hr><h2 id="四耗散系统-person_fencing">四、耗散系统 <span class="github-emoji"><span>🤺</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f93a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h2><p>为了将输入输出的增益性和状态空间的 Lyapunov 稳定性统一，提出了<strong>耗散系统</strong>的框架。</p><p>系统 $  = f(x, u), &nbsp;y = h(x, u) $ 被称为关于供能率 $ s(u, y) $ 的耗散系统，若存在函数 $ S(x)  $，称为<strong>存储函数</strong>，使得对任意时间区间 <span class="math inline">\([t_0, t_1]\)</span>：</p><p><span class="math display">\[S(x(t_1)) - S(x(t_0)) \le \int_{t_0}^{t_1} s(u(t), y(t)) {\mathrm{d}}t.\]</span></p><p>这一不等式意味着系统“吸收”的供能 $ s(u, y) $ 不会转化为比 $ S $ 所表示的内部能量更多的输出，换言之，系统具有某种“能量耗散”特性。</p><p>根据所选供能率 $ s(u,y) $ 的不同，可以刻画出不同的系统属性，如下分析。</p><h3 id="globe_with_meridians-4-1-供能率的选择与系统性能"><span class="github-emoji"><span>🌐</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f310.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 4-1 供能率的选择与系统性能</h3><p>耗散系统理论的核心，是通过定义一个输入输出对 $ (u, y) $ 上的<strong>供能率函数</strong> $ s(u, y) $，来描述系统的能量如何从输入传递到输出，以及是否会在系统内部以某种形式“被”存储或“耗散”。这一函数并非任意，而是根据我们对系统特性的不同关注点选出。典型的供能率如下：</p><h4 id="earth_africa-1.-su-y-uy"><span class="github-emoji"><span>🌍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f30d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 1. $ s(u, y) = u^y $</h4><p>此时，系统是无源的（Passive）。这是最自然的选择，反映系统从外界吸收的瞬时功率。此时，耗散不等式变为：</p><p><span class="math display">\[S(x(t_1)) - S(x(t_0)) \leq \int_{t_0}^{t_1} u^\top(t) y(t) {\mathrm {d}}t,\]</span></p><p>表示系统内部存储的能量增量不超过输入与输出之间的能量传递。其背后逻辑是：如果一个系统不会凭空生成能量，那它从输入吸收的功必须转化为内部能量或者输出能量。</p><p>在输入输出映射的形式下，该条件等价于：</p><p><span class="math display">\[\int_0^T u^\top(t) G(u)(t) {\mathrm {d}}t \geq \beta,\]</span></p><p>即映射 $ G $ 为无源系统。</p><h4 id="earth_africa-2.-su-y-uy---y2"><span class="github-emoji"><span>🌍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f30d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 2. $ s(u, y) = u^y - |y|^2 $</h4><p>此时，系统是<strong>严格输出无源的</strong>（Strict Output Passive）。在实际物理系统中，能量不仅被储存，还可能由于摩擦、电阻等原因被耗散。此时系统对输出信号的能量具有“惩罚项”，形式化为：</p><p><span class="math display">\[\int u^\top y \, {\mathrm {d}}t \geq \varepsilon \int \|y\|^2 {\mathrm {d}}t + \beta.\]</span></p><p>这说明系统输出越大，能量耗散越多。等价于：</p><p><span class="math display">\[\int_0^T u^\top(t) y(t) {\mathrm {d}}t - \varepsilon \int_0^T \|y(t)\|^2 {\mathrm {d}}t \geq \beta.\]</span></p><p>在无状态模型中，它等价于映射 $ G $ 满足：</p><p><span class="math display">\[\|G(u)\|_{\mathcal{L}_2}^2 \leq \frac{1}{\varepsilon} \int u^\top G(u) \, {\mathrm {d}}t.\]</span></p><p>因此，该供能率刻画的是<strong>输出能量耗散对输入功率的约束</strong>，其物理意义在于系统能从输出“泄露能量”。</p><h4 id="earth_africa-3.-su-y-2-u2---y2"><span class="github-emoji"><span>🌍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f30d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 3. $ s(u, y) =  ^2 |u|^2 -  |y|^2 $</h4><p>此时，系统具有有限 $ {L}_2 $-增益，不超过 $ $。该形式直接对应于系统从输入信号到输出信号的<strong>增益控制</strong>。若存在存储函数 $ S(x) $ 使得：</p><p><span class="math display">\[S(x(t_1)) - S(x(t_0)) \leq \int_{t_0}^{t_1} \left( \frac{1}{2} \gamma^2 \|u(t)\|^2 - \|y(t)\|^2 \right) {\mathrm {d}}t,\]</span></p><p>则可推出：</p><p><span class="math display">\[\|y\|^2_{\mathcal{L}_2} \leq \gamma^2 \|u\|^2_{\mathcal{L}_2} + 2 S(x_0),\]</span></p><p>这说明系统的输出能量不会超过输入能量的 $ ^2 $ 倍，加上初始能量的一个常数项。若 $ S(x) = 0 $，这就成了标准的 $ {L}_2 $-增益界定。</p><h4 id="earth_africa-4.-su-y--y2"><span class="github-emoji"><span>🌍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f30d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 4. $ s(u, y) = -|y|^2 $</h4><p>此时，系统输出能量呈现衰减趋势。这是一个强约束：系统的能量<strong>不但不能增加</strong>，甚至其输出总能量<strong>必须“亏损”</strong>。从不等式：</p><p><span class="math display">\[S(x(t_1)) - S(x(t_0)) \leq - \int_{t_0}^{t_1} \|y(t)\|^2 {\mathrm{d}}t,\]</span></p><p>可知只要输出有能量，存储函数必然下降。这是某些无源耗散系统（如阻尼结构）的典型模型，表明系统必须将输出转化为内部的损耗耗散，直至最终达到稳定。</p><h4 id="earth_africa-5.-su-y-y2---2-u2"><span class="github-emoji"><span>🌍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f30d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 5. $ s(u, y) = |y|^2 - {}^2 |u|^2 $</h4><p>此时，系统放大能力有限，适用于构造 <span class="math inline">\(H_{\infty}\)</span> 控制目标。这是一种对偶形式，更倾向于用于性能评估。若系统关于该 $ s(u, y) $ 是耗散的，则必然满足：</p><p><span class="math display">\[\int \|y\|^2 {\mathrm {d}}t \leq \gamma^2 \int \|u\|^2 {\mathrm {d}}t + S(x_0),\]</span></p><p>进而推出增益约束：</p><p><span class="math display">\[\|y\|_{\mathcal{L}_2} \leq \gamma \|u\|_{\mathcal{L}_2}.\]</span></p><p>它是最直接的 <span class="math inline">\(H_{\infty}\)</span> 范数定义形式，用作控制设计中的目标函数。该供能率的优势在于它对输出信号进行直接约束，适用于性能评估（如抗扰动、最坏场景最小化等场景）。</p><h3 id="globe_with_meridians4-2-available-storage"><span class="github-emoji"><span>🌐</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f310.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>4-2 available storage</h3><p><strong>定义：</strong></p><p><span class="math display">\[S_a(x) := \sup_{u \in {\mathcal L}_2} \left\{ - \int_0^\infty s(u(t), y(t)) {\mathrm {d}}t \right\}, \quad x(0) = x.\]</span></p><p>该函数描述从当前状态 $ x $ 出发，系统在所有可行输入作用下，<strong>所能向外界“释放”的最大能量</strong>。其物理含义与热力学中的“可用能”相同，表明状态 $ x $ 所蕴含的“控制势能”极限。</p><p><strong>从控制意义看：</strong></p><ul><li>若 $ S_a(x) = 0 $，说明此状态下系统无法向外界输出能量，是耗尽状态；</li><li>若 $ S_a(x) &gt; 0 $，说明存在输入使系统输出净能量，状态具有能量转换能力。</li></ul><p><strong>数学上，available storage 还有如下性质：</strong></p><ul><li>它是所有存储函数的<strong>下界</strong>，即：若 $ S(x) $ 是任意使系统耗散的函数，则：</li></ul><p><span class="math display">\[S_a(x) \leq S(x), \quad \forall x.\]</span></p><ul><li>它自身就是一个存储函数；</li><li>在 passivity 条件下，$ s(u, y) = u^y $，可得：</li></ul><p><span class="math display">\[\int_0^T u^\top y \, {\mathrm {d}}t \geq -S_a(x(0)).\]</span></p><p>这为系统耗散性提供了<strong>最小能量约束</strong>，有助于进行能量一致性判断与系统设计下界估计。</p><hr><h2 id="五h_infty-控制问题-mag">五、<span class="math inline">\(H_{\infty}\)</span> 控制问题 <span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h2><p>考虑非线性系统：</p><p><span class="math display">\[\dot{x} = f(x) + g(x) u + k(x) d,\]</span></p><p>其中：<span class="math inline">\(x \in \mathbb{R}^n\)</span>：系统状态；<span class="math inline">\(u \in \mathbb{R}^{n_u}\)</span>：控制输入；<span class="math inline">\(d \in \mathbb{R}^{n_d}\)</span>：外部扰动；<span class="math inline">\(f(x), g(x), k(x)\)</span> 为局部 Lipschitz 连续函数。</p><p>系统的性能输出定义为：</p><p><span class="math display">\[z(x, u) = Q(x) + u^\top R u,\]</span></p><p>其中 <span class="math inline">\(Q(x) \geq 0\)</span> 是正定函数，<span class="math inline">\(R \succ 0\)</span> 是控制输入的权重矩阵。性能目标为：对于任意扰动 <span class="math inline">\(d \in \mathcal{L}_2\)</span>，闭环系统满足：</p><p><span class="math display">\[\int_0^\infty \left( Q(x(t)) + u^\top(t) R u(t) \right) {\mathrm {d}}t \leq \gamma^2 \|d\|^2_{\mathcal{L}_2}.\]</span></p><p>这是一种标准的非线性 <span class="math inline">\(H_\infty\)</span> 控制形式，目标是以最小控制代价抑制最强扰动。</p><h3 id="bulb-5-1.-耗散系统-h_infty-性能指标"><span class="github-emoji"><span>💡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 5-1. 耗散系统 <span class="math inline">\(H_\infty\)</span> 性能指标</h3><p>构造供能率函数：</p><p><span class="math display">\[s(d, x, u) := Q(x) + u^\top R u - \gamma^2 \|d\|^2,\]</span></p><p>若存在光滑非负函数 <span class="math inline">\(V(x)\)</span> 使得系统沿解轨迹满足：</p><p><span class="math display">\[\dot{V}(x) \leq - s(d, x, u) ,\]</span></p><p>则沿系统轨迹有</p><p><span class="math display">\[\frac{\mathrm{d}}{\mathrm{d}t} V(x(t))\le -Q(x) - u^\top R u + \gamma^2 \|d\|^2.\]</span></p><p>则通过积分可得：</p><p><span class="math display">\[V(x(0)) \geq \int_0^\infty \left( Q(x(t)) + u^\top(t) R u(t) \right) {\mathrm {d}}t - \gamma^2 \|d\|^2_{\mathcal{L}_2},\]</span></p><p>即系统满足期望的 <span class="math inline">\(H_\infty\)</span> 性能指标。</p><h3 id="bulb-5-2.-hji-推导"><span class="github-emoji"><span>💡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 5-2. HJI 推导</h3><p>考虑沿系统轨迹对 <span class="math inline">\(V(x)\)</span> 求导：</p><p><span class="math display">\[\dot{V}(x) = \nabla V(x)^\top \left( f(x) + g(x) u + k(x) d \right).\]</span></p><p>代入上述不等式，有：</p><p><span class="math display">\[\nabla V^\top f(x) + \nabla V^\top g(x) u + \nabla V^\top k(x) d \leq - Q(x) - u^\top R u + \gamma^2 \|d\|^2.\]</span></p><p>整理后构造 Hamiltonian：</p><p><span class="math display">\[H(x, \nabla V, u, d) := \nabla V^\top f(x) + Q(x) + \nabla V^\top g(x) u + u^\top R u + \nabla V^\top k(x) d - \gamma^2 \|d\|^2.\]</span></p><p>要求：</p><p><span class="math display">\[\inf_{u} \sup_{d} H(x, \nabla V, u, d) \leq 0,\]</span></p><p>即系统在最坏扰动下依然满足性能限制。</p><h3 id="bulb-5-3.-扰动与控制的最优化"><span class="github-emoji"><span>💡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 5-3. 扰动与控制的最优化</h3><ul><li><strong>(1) 对扰动 <span class="math inline">\(d\)</span> 的极大化（扰动 <span class="math inline">\(d\)</span> 试图最大化供能）</strong>：</li></ul><p>求：</p><p><span class="math display">\[\sup_d \left\{ \nabla V^\top k(x) d - \gamma^2 \|d\|^2 \right\}\]</span></p><p>最优扰动为：</p><p><span class="math display">\[d^* = \frac{1}{2\gamma^2} k(x)^\top \nabla V(x)\]</span></p><p>对应最大值为：</p><p><span class="math display">\[\frac{1}{4\gamma^2} \| \nabla V^\top k(x) \|^2.\]</span></p><ul><li><strong>(2) 对控制输入 <span class="math inline">\(u\)</span> 的极小化（控制 <span class="math inline">\(u\)</span> 试图最小化供能）</strong>：</li></ul><p>求：</p><p><span class="math display">\[\inf _u \left\{ \nabla V^\top g(x) u + u^\top R u \right\} \]</span></p><p>最优控制为：</p><p><span class="math display">\[u^* = - \frac{1}{2} R^{-1} g(x)^\top \nabla V(x)\]</span></p><p>对应最小值为：</p><p><span class="math display">\[ -\frac{1}{4} \nabla V^\top g(x) R^{-1} g(x)^\top \nabla V.\]</span></p><p>最优控制为：</p><p><span class="math display">\[u^* = - \frac{1}{2} R^{-1} g(x)^\top \nabla V(x)\]</span></p><p>对应最小值为：</p><p><span class="math display">\[ -\frac{1}{4} \nabla V^\top g(x) R^{-1} g(x)^\top \nabla V.\]</span></p><h3 id="bulb-5-4.-hji-不等式最终形式"><span class="github-emoji"><span>💡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 5-4. HJI 不等式最终形式</h3><p>将控制项与扰动项代入 Hamiltonian，得到最终形式的 HJI 不等式：</p><p><span class="math display">\[\nabla V^\top f(x) + Q(x) - \frac{1}{4} \nabla V^\top g(x) R^{-1} g(x)^\top \nabla V + \frac{1}{4\gamma^2} \|\nabla V^\top k(x)\|^2 \leq 0.\]</span></p><p>若存在正定光滑函数 <span class="math inline">\(V(x)\)</span> 满足上述不等式，则控制器：</p><p><span class="math display">\[u(x) = -\frac{1}{2} R^{-1} g(x)^\top \nabla V(x)\]</span></p><p>确保系统满足性能约束：</p><p><span class="math display">\[\int_0^\infty \left( Q(x(t)) + u^\top(t) R u(t) \right) dt \leq \gamma^2 \|d\|^2_{\mathcal{L}_2}.\]</span></p><hr>]]></content>
    
    
    <categories>
      
      <category>control</category>
      
    </categories>
    
    
    <tags>
      
      <tag>耗散系统</tag>
      
      <tag>L2</tag>
      
      <tag>H_infty control</tag>
      
      <tag>HJI</tag>
      
      <tag>Robust control</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Github 端口连接</title>
    <link href="/2025/03/27/00=Daily/3-git_port/"/>
    <url>/2025/03/27/00=Daily/3-git_port/</url>
    
    <content type="html"><![CDATA[<h2 id="rocket-一问题描述"><span class="github-emoji"><span>🚀</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 一、问题描述</h2><p>以前从本地 <code>pull/push</code> 文件向 <code>github</code> 仓库远程操作时，没有任何问题，今天操作出现如下报错： </p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">bash<br>$ git pull<br>ssh: <span class="hljs-keyword">connect</span> <span class="hljs-keyword">to</span> host github.com port <span class="hljs-number">22</span>: <span class="hljs-keyword">Connection</span> refused<br>fatal: Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">read</span> <span class="hljs-keyword">from</span> remote repository.<br>​<br>Please make sure you have the correct <span class="hljs-keyword">access</span> rights<br><span class="hljs-keyword">and</span> the repository <span class="hljs-keyword">exists</span>.<br></code></pre></td></tr></tbody></table></figure> 提示链接 <code>github</code> 的 <code>22</code> 端口被拒绝。<p></p><h2 id="zap-二解决方案"><span class="github-emoji"><span>⚡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 二、解决方案</h2><ul><li>修改 <code>SSH</code> 的 <code>config</code> 文件。在 <code>C:\Users\用户名\.ssh</code> 目录下，新建一个名为 <code>config</code> 的文件，内容如下：（如果目录下有 <code>config</code> 文件，直接在文件里添加即可） <figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Host github<span class="hljs-selector-class">.com</span><br>  HostName github<span class="hljs-selector-class">.com</span><br>  Port <span class="hljs-number">443</span><br></code></pre></td></tr></tbody></table></figure> 切换端口为<code>443</code>。</li><li>打开 <code>Git Bash</code>，输入以下命令，测试连接： <figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> -T git<span class="hljs-variable">@github</span>.com<br></code></pre></td></tr></tbody></table></figure></li><li>如果连接成功，会显示以下信息： <figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">Hi username! You<span class="hljs-symbol">'ve</span> successfully authenticated, but GitHub does <span class="hljs-keyword">not</span> provide shell <span class="hljs-keyword">access</span>.<br></code></pre></td></tr></tbody></table></figure></li><li>重新 <code>pull/push</code> 即可。</li></ul><h2 id="dart-三报错原因"><span class="github-emoji"><span>🎯</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f3af.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 三、报错原因</h2><ul><li>可能是因为 <code>SSH</code> 的 <code>config</code> 文件中配置的端口与实际使用的端口不一致。</li><li>用了 <code>VPN</code> 导致的网络配置问题。</li></ul>]]></content>
    
    
    <categories>
      
      <category>github</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github</tag>
      
      <tag>debug</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VS code 编译 .tex 文件</title>
    <link href="/2025/03/04/00=Daily/2-vs_tex/"/>
    <url>/2025/03/04/00=Daily/2-vs_tex/</url>
    
    <content type="html"><![CDATA[<h2 id="安装-vs-code-插件latex-workshop">1. 安装 VS code 插件：<code>Latex Workshop</code></h2><p><span class="github-emoji"><span>🚀</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 在 VS code 扩展商店中找到 <a href="https://github.com/James-Yu/LaTeX-Workshop/wiki/Compile#placeholders">Latex Workshop</a> 插件（如下），安装即可。 <img src="/img/VSTeX/LatexWorkshop.jpg" alt="LatexWorkshop"></p><h2 id="打开一个-.tex-文件">2. 打开一个 <code>.tex</code> 文件</h2><p><span class="github-emoji"><span>🤖</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f916.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 可以看到 VS code 已经自动高亮文档内容 <img src="/img/VSTeX/latex.jpg" alt="latex"></p><h2 id="配置-latex-workshop">3. 配置 Latex Workshop</h2><ul><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 按 <code>F1</code>，搜索<code>setjson</code>，打开配置文件 <img src="/img/VSTeX/setjson.jpg" alt="setjson"></li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 可以看到在项目中生成了<code>.vscode</code>文件夹，在其中打开<code>settings.json</code>文件，添加如下代码： <figure class="highlight autoit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs autoit">{<br>    <span class="hljs-string">"latex-workshop.latex.autoBuild.run"</span>: <span class="hljs-string">"never"</span>,        <span class="hljs-meta"># 从不自动编译</span><br>    <span class="hljs-string">"latex-workshop.showContextMenu"</span>: <span class="hljs-literal">true</span>,               <span class="hljs-meta"># 显示右键菜单，出现<span class="hljs-string">"Build Latex Project"</span>选项</span><br>    <span class="hljs-string">"latex-workshop.intellisense.package.enabled"</span>: <span class="hljs-literal">true</span>,  <span class="hljs-meta"># 启用包自动完成</span><br>    <span class="hljs-string">"latex-workshop.message.error.show"</span>: <span class="hljs-literal">false</span>,           <span class="hljs-meta"># 不显示错误信息（从终端获取）</span><br>    <span class="hljs-string">"latex-workshop.message.warning.show"</span>: <span class="hljs-literal">false</span>,         <span class="hljs-meta"># 不显示警告信息（从终端获取）</span><br>    <span class="hljs-string">"latex-workshop.latex.tools"</span>: [<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"xelatex"</span>,<br>            <span class="hljs-string">"command"</span>: <span class="hljs-string">"xelatex"</span>,<br>            <span class="hljs-string">"args"</span>: [<br>                <span class="hljs-string">"-synctex=1"</span>,<br>                <span class="hljs-string">"-interaction=nonstopmode"</span>,<br>                <span class="hljs-string">"-file-line-error"</span>,<br>                <span class="hljs-string">"%DOCFILE%"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"pdflatex"</span>,<br>            <span class="hljs-string">"command"</span>: <span class="hljs-string">"pdflatex"</span>,<br>            <span class="hljs-string">"args"</span>: [<br>                <span class="hljs-string">"-synctex=1"</span>,<br>                <span class="hljs-string">"-interaction=nonstopmode"</span>,<br>                <span class="hljs-string">"-file-line-error"</span>,<br>                <span class="hljs-string">"%DOCFILE%"</span>                                <span class="hljs-meta"># 文件所在路径可以为中文，若为<span class="hljs-string">"%DOC"</span>则不可有中文</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"latexmk"</span>,<br>            <span class="hljs-string">"command"</span>: <span class="hljs-string">"latexmk"</span>,<br>            <span class="hljs-string">"args"</span>: [<br>                <span class="hljs-string">"-synctex=1"</span>,<br>                <span class="hljs-string">"-interaction=nonstopmode"</span>,<br>                <span class="hljs-string">"-file-line-error"</span>,<br>                <span class="hljs-string">"-pdf"</span>,<br>                <span class="hljs-string">"-outdir=%OUTDIR%"</span>,<br>                <span class="hljs-string">"%DOCFILE%"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"bibtex"</span>,<br>            <span class="hljs-string">"command"</span>: <span class="hljs-string">"bibtex"</span>,<br>            <span class="hljs-string">"args"</span>: [<br>                <span class="hljs-string">"%DOCFILE%"</span><br>            ]<br>        }<br>    ],<br>    <span class="hljs-string">"latex-workshop.latex.recipes"</span>: [<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"XeLaTeX"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"xelatex"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"PDFLaTeX"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"pdflatex"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"BibTeX"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"bibtex"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"LaTeXmk"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"latexmk"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"xelatex -&gt; bibtex -&gt; xelatex*2"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"xelatex"</span>,<br>                <span class="hljs-string">"bibtex"</span>,<br>                <span class="hljs-string">"xelatex"</span>,<br>                <span class="hljs-string">"xelatex"</span><br>            ]<br>        },<br>        {<br>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"pdflatex -&gt; bibtex -&gt; pdflatex*2"</span>,<br>            <span class="hljs-string">"tools"</span>: [<br>                <span class="hljs-string">"pdflatex"</span>,<br>                <span class="hljs-string">"bibtex"</span>,<br>                <span class="hljs-string">"pdflatex"</span>,<br>                <span class="hljs-string">"pdflatex"</span><br>            ]<br>        },<br>    ],<br>    <span class="hljs-string">"latex-workshop.latex.clean.fileTypes"</span>: [<br>        <span class="hljs-string">"*.aux"</span>,<br>        <span class="hljs-string">"*.bbl"</span>,<br>        <span class="hljs-string">"*.blg"</span>,<br>        <span class="hljs-string">"*.idx"</span>,<br>        <span class="hljs-string">"*.ind"</span>,<br>        <span class="hljs-string">"*.lof"</span>,<br>        <span class="hljs-string">"*.lot"</span>,<br>        <span class="hljs-string">"*.out"</span>,<br>        <span class="hljs-string">"*.toc"</span>,<br>        <span class="hljs-string">"*.acn"</span>,<br>        <span class="hljs-string">"*.acr"</span>,<br>        <span class="hljs-string">"*.alg"</span>,<br>        <span class="hljs-string">"*.glg"</span>,<br>        <span class="hljs-string">"*.glo"</span>,<br>        <span class="hljs-string">"*.gls"</span>,<br>        <span class="hljs-string">"*.ist"</span>,<br>        <span class="hljs-string">"*.fls"</span>,<br>        <span class="hljs-string">"*.log"</span>,<br>        <span class="hljs-string">"*.fdb_latexmk"</span><br>    ],<br>    <span class="hljs-string">"latex-workshop.latex.autoClean.run"</span>: <span class="hljs-string">"onFailed"</span>,                       <span class="hljs-meta"># 编译失败时自动清理上述类型的辅助文件（<span class="hljs-string">"OnBuilt"</span>:无论编译是否成功，都清除辅助文件；<span class="hljs-string">"never"</span>:无论编译是否成功，都不清除）</span><br>    <span class="hljs-string">"latex-workshop.latex.recipe.default"</span>: <span class="hljs-string">"lastUsed"</span>,                      <span class="hljs-meta"># 编译时使用上次使用的编译方式</span><br>    <span class="hljs-string">"latex-workshop.view.pdf.internal.synctex.keybinding"</span>: <span class="hljs-string">"double-click"</span>   <span class="hljs-meta"># 点击 pdf 可以跳转到相应代码位置</span><br>}<br></code></pre></td></tr></tbody></table></figure></li></ul><h2 id="设置编译快捷键可选">4. 设置编译快捷键（可选）</h2><ul><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 左下角打开设置 -&gt; <code>Keyboard Shortcut</code>-&gt; 搜索<code>recipe</code> -&gt; 双击中间的<code>When</code> -&gt; 按下想要使用的快捷键</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 选择编译方式 <img src="/img/VSTeX/compile.jpg" alt="compile"></li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong>直接运行<code>.tex</code>文件也可以编译</strong></li></ul><h2 id="测试">5. 测试</h2><figure><img src="/img/VSTeX/test.jpg" alt="test"><figcaption aria-hidden="true">test</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Latex</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VS code</tag>
      
      <tag>Latex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>什么是 .bat 文件？</title>
    <link href="/2025/03/03/00=Daily/1-bat_explain/"/>
    <url>/2025/03/03/00=Daily/1-bat_explain/</url>
    
    <content type="html"><![CDATA[<h2 id="monocle_face-what-is-the-file-with-the-suffix-.bat"><span class="github-emoji"><span>🧐</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f9d0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> What is the file with the suffix “.bat” ?</h2><ul><li>后缀为“.bat”的文档是一个批处理文件。它是一种<strong>可执行</strong>文件，其中包含由操作系统执行的一系列命令。批处理文件通常用于自动化涉及多个命令的任务。它们通常用于<strong>安装</strong>软件、<strong>配置</strong>系统设置或<strong>执行</strong>其他需要多个步骤的任务。</li></ul><h2 id="rocket-example"><span class="github-emoji"><span>🚀</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> Example</h2><p><strong>这是一个批处理文件的示例，它将“open with VS code”选项添加到Windows右键菜单中，允许用户直接右键单击文件夹或其背景（空白），并在 VS code 中打开文件夹。</strong></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nix">@echo off<br>REG ADD <span class="hljs-string">"HKEY_CLASSES_ROOT<span class="hljs-char escape_">\D</span>irectory<span class="hljs-char escape_">\B</span>ackground<span class="hljs-char escape_">\s</span>hell<span class="hljs-char escape_">\O</span>pen with VS Code"</span> <span class="hljs-symbol">/ve</span> <span class="hljs-symbol">/t</span> REG_SZ <span class="hljs-symbol">/d</span> <span class="hljs-string">"open here with VS Code"</span> <span class="hljs-symbol">/f</span><br>REG ADD <span class="hljs-string">"HKEY_CLASSES_ROOT<span class="hljs-char escape_">\D</span>irectory<span class="hljs-char escape_">\B</span>ackground<span class="hljs-char escape_">\s</span>hell<span class="hljs-char escape_">\O</span>pen with VS Code<span class="hljs-char escape_">\c</span>ommand"</span> <span class="hljs-symbol">/ve</span> <span class="hljs-symbol">/t</span> REG_SZ <span class="hljs-symbol">/d</span> <span class="hljs-string">"<span class="hljs-char escape_">\"</span>E:<span class="hljs-char escape_">\V</span>S code<span class="hljs-char escape_">\M</span>icrosoft VS Code<span class="hljs-char escape_">\C</span>ode.exe<span class="hljs-char escape_">\"</span> <span class="hljs-char escape_">\"</span>%%V<span class="hljs-char escape_">\"</span>"</span> <span class="hljs-symbol">/f</span><br>echo VS Code Successful！<br>pause<br></code></pre></td></tr></tbody></table></figure><ul><li><span class="github-emoji"><span>📞</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4de.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>@echo off</code></strong> 上述代码的第一行<strong>关闭</strong>命令行窗口的响应，以防止每次<strong>执行命令</strong>时它出现在屏幕上，使界面更清晰。<p style="margin-bottom:40px;"></p></li><li><span class="github-emoji"><span>🖥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f5a5.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>REG ADD "HKEY_CLASSES_ROOT\Directory\Background\shell\Open with VS Code" /ve /t REG_SZ /d "open here with VS Code" /f</code></strong> 将键或值添加到Windows注册表。<ul><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>KEY_CLASSES_ROOT\Directory\Background\shell\Open with VS Code</code></strong> : 在Windows资源管理器的右键菜单中创建一个新选项“open with VS code”。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>/ve</code></strong> : 创建一个默认值（未命名键值）。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>/t REG_SZ</code></strong> : 将值的数据类型设置为<strong>REG_SZ</strong>（<em>字符串</em>）。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>/d "open here with VS Code"</code></strong> : 设置注册表的值，即右键菜单中显示的文本（<strong>open here with VS code</strong>）。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>/f</code></strong> : 强制操作<strong>覆盖</strong>任何现有键或值。<p style="margin-bottom:40px;"></p></li></ul></li><li><span class="github-emoji"><span>🖥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f5a5.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>REG ADD "HKEY_CLASSES_ROOT\Directory\Background\shell\Open with VS Code\command" /ve /t REG_SZ /d "\"E:\VS code\Microsoft VS Code\Code.exe\" \"%%V\"" /f</code></strong><ul><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>HKEY_CLASSES_ROOT\Directory\Background\shell\Open with VS Code\command</code></strong>: 定义单击菜单项后要执行的命令。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>"E:\VS code\Microsoft VS Code\Code.exe"</code></strong>: VS code 的可执行文件路径。</li><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>"%%V"</code></strong>: <strong>当前</strong>文件夹路径，即用户右键单击的文件夹。<p style="margin-bottom:40px;"></p></li></ul></li><li><span class="github-emoji"><span>🖥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f5a5.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong><code>echo VS Code Successful！</code></strong><ul><li><span class="github-emoji"><span>🔍</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f50d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 在命令行窗口中显示提示，表明注册表已成功修改。</li></ul></li></ul><h2 id="file_folder-operation-effect"><span class="github-emoji"><span>📁</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4c1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> Operation effect</h2><ul><li><span class="github-emoji"><span>👆</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f446.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> Right-click the folder or blank space inside the folder, select “Open with VS Code”. <img src="/img/BatExplain/operation1.jpg" alt="right-click1"> <img src="/img/BatExplain/operation2.jpg" alt="right-click2"></li></ul>]]></content>
    
    
    <categories>
      
      <category>VS code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VS code</tag>
      
      <tag>bat</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
